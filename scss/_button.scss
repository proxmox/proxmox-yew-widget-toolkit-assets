@use "sass:math";

button {
    @include font_and_line_height("label-large");
}

.pwt-action-icon {
    line-height: map-get($line-height, label-large);

    display: inline-flex;
    align-items: baseline;
    align-items: center;
    justify-content: center;

    cursor: pointer;
    outline: 0;

    padding: map-get($spacers, 1);
    border-radius: 10rem;
    width: map-get($line-height, "label-large") + 2 * map-get($spacers, 1) !important;
    box-sizing: border-box;
    aspect-ratio: 1 / 1;

    &:hover:not(:disabled):not(:active):not(:active) {
        background-color: map-get($pwt-color, surface);
    }

    &:focus-visible {
        outline: 2px solid $color-focus;
        outline-offset: -2px;
    }

    &:disabled {
        cursor: auto;
        opacity: 0.5;
    }

    &:active {
        background-color: map-get($pwt-color, surface-emphase);
    }
}

.pwt-button {
    @include color-scheme-vars("surface");

    display: inline-flex;
    align-items: baseline;
    gap: $icon-spacer;
    transition: 0.1s;

    position: relative; // required to set z-index

    padding: map-get($spacers, 1) map-get($spacers, 2);
    text-align: center;
    vertical-align: middle;
    cursor: pointer;
    white-space: nowrap !important;
    user-select: none;
    border: 1px solid map-get($pwt-color, "border") !important;
    border-radius: $button-corner-shape;

    &.pwt-elevated {
        --pwt-color: #{map-get($pwt-color, "primary")};
        $distance: map-get($elevation-levels, 1);
        box-shadow: $color-shadow 0px math.div($distance, 1) $distance;
    }

    color: var(--pwt-color);
    background-color: var(--pwt-color-background);

    &.pressed,
    &:active:not(:disabled) {
        background-color: var(--pwt-color-pressed);
        //box-shadow: none !important;
        $distance: map-get($elevation-levels, 1);
        box-shadow: $color-shadow 0px math.div($distance, 1) $distance;
        z-index: 1,  // correctly show shadows
    }

    &:hover:not(:disabled):not(:active):not(.pressed) {
        background-color: var(--pwt-color-emphase);
        $distance: map-get($elevation-levels, 2);
        box-shadow: $color-shadow 0px math.div($distance, 2) $distance;
        z-index: 1, // correctly show shadows
    }

    &:focus-visible {
        outline: 2px solid $color-focus;
        outline-offset: -2px;
    }

    &:disabled {
        cursor: auto;
        opacity: 0.5;
    }
}


.pwt-button.rounded {
    border-radius: 10rem !important;
}

.pwt-button.circle {
    border-radius: 10rem !important;
    box-sizing: border-box;
    width: map-get($line-height, "label-large") + 2 * map-get($spacers, 1) + 2px;
    aspect-ratio: 1 / 1;
    flex: 0 0 auto;
    align-items: center;
    justify-content: center;
}

.pwt-segmented-button {
    white-space: nowrap;
}

.pwt-segmented-button>.pwt-button {
    border-radius: 0px;
    border-inline-start: 0px !important;
}

.pwt-segmented-button>.pwt-button:first-child {
    border-start-start-radius: $button-corner-shape;
    border-end-start-radius: $button-corner-shape;
    border-inline-start: 1px solid map-get($pwt-color, "border") !important;
}

.pwt-segmented-button>.pwt-button:last-child {
    border-start-end-radius: $button-corner-shape;
    border-end-end-radius: $button-corner-shape;
}


.pwt-segmented-button>.pwt-button.rounded {
    border-radius: 0px !important;
}

.pwt-segmented-button>.pwt-button.rounded:first-child,
.pwt-segmented-button.rounded>.pwt-button:first-child,
{
border-start-start-radius: 10rem !important;
border-end-start-radius: 10rem !important;
}

.pwt-segmented-button>.pwt-button.rounded:last-child,
.pwt-segmented-button.rounded>.pwt-button:last-child,
{
border-start-end-radius: 10rem !important;
border-end-end-radius: 10rem !important;
}

.pwt-segmented-button.raised>.pwt-button {
    $distance: map-get($elevation-levels, 1);
    box-shadow: $color-shadow 0px math.div($distance, 1) $distance;
}


@mixin button-color-definitions($scheme) {

    .pwt-segmented-button.pwt-scheme-#{$scheme}>.pwt-button,
    .pwt-segmented-button>.pwt-button.pwt-scheme-#{$scheme},
    {
    @include color-scheme-vars($scheme);
}
}

@each $scheme-name in $color-names {
    @include button-color-definitions($scheme-name);
}